b'<!DOCTYPE html><br><br><html itemscope="itemscope" itemtype="http://schema.org/WebPage"><br><head><br><meta content="IE=edge" http-equiv="X-UA-Compatible"/><br><meta content="text/html; charset=utf-8" http-equiv="content-type"/><br><meta content="true" name="HandheldFriendly"/><br><meta content="width=device-width, height=device-height, user-scalable=no" name="viewport"/><br><!-- blueprint CSS framework --><br><link href="/floorplans/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css"/><br><link href="/floorplans/css/print.css" media="print" rel="stylesheet" type="text/css"/><br><!--[if lt IE 8]>\r<br>\t<link rel="stylesheet" type="text/css" href="/floorplans/css/ie.css" media="screen, projection" />\t\r<br>\t<![endif]--><br><link href="/floorplans/css/main.css" rel="stylesheet" type="text/css"/><br><link href="/floorplans/css/form.css" rel="stylesheet" type="text/css"/><br><link href="/floorplans/css/custom.css" rel="stylesheet" type="text/css"/><br><meta content="View Library Ground Floor" name="description"/><br><link href="/floorplans/assets/8d3342de/css/bootstrap.css" rel="stylesheet" type="text/css"/><br><link href="/floorplans/assets/8d3342de/css/bootstrap-yii.css" rel="stylesheet" type="text/css"/><br><link href="/floorplans/js/jquery-ui/css/smoothness/jquery-ui-1.8.23.custom.css" rel="stylesheet" type="text/css"/><br><script src="/floorplans/assets/9125103b/jquery.min.js" type="text/javascript"></script><br><script src="/floorplans/assets/9125103b/jui/js/jquery-ui.min.js" type="text/javascript"></script><br><script src="/floorplans/assets/8d3342de/js/bootstrap.js" type="text/javascript"></script><br><script src="/floorplans/js/mobile/jquery.ui.touch-punch.min.js" type="text/javascript"></script><br><script src="/floorplans/js/mobile/hammer.js" type="text/javascript"></script><br><script src="/floorplans/js/mobile/jquery.hammer.js" type="text/javascript"></script><br><script src="/floorplans/js/jquery.cookie.js" type="text/javascript"></script><br><title>Library Ground Floor - HKUST Library Floorplans</title><br></head><br><body style="border: none; padding: 0; /*max-width:767px;*/ margin-left: auto; margin-right:auto;"><br><script type="text/javascript">\r<br>\tvar idleTime = 0;\r<br>\t$(window).load(function() {\t\t\r<br>\t\tshow();\r<br>\t\t\r<br>\t\t//timeout script for xibo\r<br>\t\t\t});\r<br>\t\r<br>\t\r<br>\t\r<br>\tfunction show() {\r<br>\t\t$(\'#loading\').hide();\t   \r<br>\t\t$(\'#loaded_content\').show();\r<br>\t};\r<br>\t\r<br></script><br><div id="loading" style="position: fixed; top:50%; left:50%;"><img src="/floorplans/images/ajax-loader.gif"/><br/>Loading...</div><br><div id="loaded_content" style="display: none;"><br><!-- content --><br><style type="text/css">    \r<br>    .breadcrumb_custom{\r<br>        /*\r<br>        background: #eeeeee; \r<br>        background: -moz-linear-gradient(top,  #eeeeee 0%, #cccccc 100%); \r<br>        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeeeee), color-stop(100%,#cccccc)); \r<br>        background: -webkit-linear-gradient(top,  #eeeeee 0%,#cccccc 100%); \r<br>        background: -o-linear-gradient(top,  #eeeeee 0%,#cccccc 100%);\r<br>        background: -ms-linear-gradient(top,  #eeeeee 0%,#cccccc 100%); \r<br>        background: linear-gradient(to bottom,  #eeeeee 0%,#cccccc 100%); \r<br>        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=\'#eeeeee\', endColorstr=\'#cccccc\',GradientType=0 ); \r<br>        */\r<br>        \r<br>        background: #fcfcfc;\r<br>        background: -moz-linear-gradient(top,  #fcfcfc 0%, #ededed 100%);\r<br>        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#fcfcfc), color-stop(100%,#ededed));\r<br>        background: -webkit-linear-gradient(top,  #fcfcfc 0%,#ededed 100%);\r<br>        background: -o-linear-gradient(top,  #fcfcfc 0%,#ededed 100%);\r<br>        background: -ms-linear-gradient(top,  #fcfcfc 0%,#ededed 100%);\r<br>        background: linear-gradient(to bottom,  #fcfcfc 0%,#ededed 100%);\r<br>        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=\'#fcfcfc\', endColorstr=\'#ededed\',GradientType=0 );\r<br>\r<br>    }\r<br>    .breadcrubm_custom div a{\r<br>        color: #006EA6;\r<br>    }\r<br>    .breadcrumb_custom div .divider_custom{\r<br>        color: #7F7F7F;\r<br>    }\r<br>    .breadcrumb_custom div .header{\r<br>        color: #333333;\r<br>        font-size: medium;\r<br>        font-weight: bold;\r<br>    }\r<br>    /*.breadcrumb li{*/\r<br>    /*    text-shadow: none;*/\r<br>    /*}*/\r<br>    .tooltip{\r<br>        font-size:15px;        \r<br>    }\r<br>    .tooltip-inner{\r<br>        text-align: left;\r<br>        margin-bottom: 10px;\r<br>        font-weight: bold;\r<br>        background: #61afff;        \r<br>        /*background: rgb(122,188,255);*/ /* Old browsers */                \r<br>         /*background: -moz-linear-gradient(top,  rgba(122,188,255,1) 0%, rgba(96,171,248,1) 44%, rgba(64,150,238,1) 100%);*/ /* FF3.6+ */\r<br>        /*background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(122,188,255,1)), color-stop(44%,rgba(96,171,248,1)), color-stop(100%,rgba(64,150,238,1)));*/ /* Chrome,Safari4+ */\r<br>        /*background: -webkit-linear-gradient(top,  rgba(122,188,255,1) 0%,rgba(96,171,248,1) 44%,rgba(64,150,238,1) 100%);*/ /* Chrome10+,Safari5.1+ */\r<br>        /*background: -o-linear-gradient(top,  rgba(122,188,255,1) 0%,rgba(96,171,248,1) 44%,rgba(64,150,238,1) 100%);*/ /* Opera 11.10+ */\r<br>        /*background: -ms-linear-gradient(top,  rgba(122,188,255,1) 0%,rgba(96,171,248,1) 44%,rgba(64,150,238,1) 100%);*/ /* IE10+ */\r<br>        /*background: linear-gradient(to bottom,  rgba(122,188,255,1) 0%,rgba(96,171,248,1) 44%,rgba(64,150,238,1) 100%);*/ /* W3C */\r<br>        /*filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=\'#7abcff\', endColorstr=\'#4096ee\',GradientType=0 );*/ /* IE6-9 */\r<br>    }    \r<br>    .tooltip.top .tooltip-arrow{\r<br>        border-width: 17px 5px 0;        \r<br>        /*border-top-color: #4096ee;*/\r<br>       border-top-color: #61afff;        \r<br>    }\r<br>    .tooltip.in{\r<br>        opacity: 1;\r<br>        filter: alpha(opacity=100);\r<br>    }    \r<br>    .lib_obj{       \r<br>        position: absolute;\r<br>        background: url(/floorplans/images//transparent.gif) repeat;\r<br>        cursor: pointer;\r<br>        z-index: 999;\r<br>    }\r<br>    /* position of div of place    */\r<br>    #place_1{top:647px;left:1004px;width:192px;height:78px;}#place_2{top:598px;left:1011px;width:147px;height:46px;}#place_3{top:705px;left:431px;width:171px;height:40px;}#place_5{top:610px;left:502px;width:71px;height:67px;}#place_6{top:456px;left:1316px;width:29px;height:111px;}#place_7{top:643px;left:651px;width:11px;height:30px;}#place_8{top:565px;left:444px;width:15px;height:23px;}#place_9{top:594px;left:616px;width:16px;height:14px;}#place_10{top:673px;left:604px;width:150px;height:51px;}#place_11{top:444px;left:740px;width:181px;height:19px;}#place_12{top:479px;left:932px;width:9px;height:19px;}#place_13{top:510px;left:983px;width:49px;height:67px;}#place_14{top:469px;left:952px;width:17px;height:11px;}#place_16{top:454px;left:1163px;width:8px;height:9px;}#place_17{top:468px;left:906px;width:12px;height:24px;}#place_18{top:575px;left:1200px;width:116px;height:149px;}#place_19{top:396px;left:29px;width:406px;height:186px;}#place_20{top:610px;left:957px;width:39px;height:44px;}#place_21{top:610px;left:606px;width:34px;height:42px;}#place_22{top:641px;left:300px;width:31px;height:56px;}#place_23{top:408px;left:786px;width:109px;height:9px;}#place_24{top:px;left:px;width:px;height:px;}#place_25{top:435px;left:596px;width:68px;height:145px;}#place_26{top:660px;left:431px;width:67px;height:34px;}#place_27{top:px;left:px;width:px;height:px;}#place_28{top:480px;left:995px;width:56px;height:12px;}#place_55{top:452px;left:527px;width:49px;height:144px;}#place_108{top:560px;left:458px;width:52px;height:11px;}#place_181{top:472px;left:810px;width:7px;height:7px;}#place_182{top:479px;left:810px;width:6px;height:8px;}#place_183{top:505px;left:813px;width:46px;height:48px;}#place_186{top:471px;left:671px;width:51px;height:17px;}#place_188{top:566px;left:809px;width:7px;height:15px;}#place_190{top:635px;left:574px;width:12px;height:19px;}#place_191{top:636px;left:1015px;width:140px;height:1px;}#place_196{top:446px;left:1149px;width:17px;height:8px;}#place_202{top:504px;left:1022px;width:12px;height:6px;}#place_203{top:599px;left:342px;width:52px;height:12px;}#place_205{top:510px;left:931px;width:50px;height:71px;}#place_210{top:503px;left:696px;width:26px;height:15px;}#place_211{top:502px;left:671px;width:24px;height:16px;}#place_216{top:510px;left:1032px;width:11px;height:71px;}#place_218{top:540px;left:850px;width:45px;height:15px;}    /* position of item */    \r<br>        \r<br>    #zoom_out_btn{\r<br>        position: fixed;\r<br>        top: 38px;\r<br>        left: 44px;\r<br>        z-index: 999;\r<br>        height:38px;\r<br>    }\r<br>    #zoom_in_btn{\r<br>        position: fixed;\r<br>        top: 38px;\r<br>        left: 0px;\r<br>        z-index: 999;\r<br>        height:38px;\r<br>    }\r<br>    #max_size_btn{\r<br>        position: fixed;\r<br>        top: 38px;\r<br>        left: 88px;        \r<br>        z-index: 999;\r<br>        padding:0px;\r<br>        width:44px;\r<br>        height:38px;\r<br>    }\r<br>    #min_size_btn{\r<br>        position: fixed;\r<br>        top: 38px;\r<br>        left: 132px;\r<br>        z-index: 999;\r<br>        height:38px;\r<br>    }   \r<br>    #floor-label-div{\r<br>        position:fixed;\r<br>        z-index:999;\r<br>        width:100%;\r<br>        top:38px;\r<br>        text-align: center;\r<br>    }    \r<br></style><br><script type="text/javascript">    \r<br>    var map_origin_left;\r<br>    var map_origin_top;\r<br>    var timeout;\r<br>    var dragging = 0; //fix for mouseleave event and mouseup event\r<br>    var draggable_active = 0; //fix for draggable and mousedown event\r<br>    \r<br>    $(document).ready(\r<br>        function(){\r<br>            //hide back btn if history does not exist\r<br>            if (history.length < 2) {\r<br>                $(\'#back_btn\').remove();\r<br>            }\r<br>            \r<br>            var circle_width_amplify_ratio = "0.2";\r<br>            var circle_height_amplify_ratio = "0.1";\r<br>            //cache html element\r<br>            var tooltip =$(\'.tooltip\');\r<br>            var place_focus = $(\'#place_focus\');\r<br>            var map = $(\'#map\');\r<br>            var draggable_div = $(\'#draggable_div\');\r<br>            var lib_obj = $(\'.lib_obj\');\r<br>            \r<br>                        var map_container = $(\'#map_container\');            \r<br>            var map_origin_width = parseFloat(map.css(\'max-width\'));                       \r<br>            var banner = $(\'#banner\');\r<br>            var menu_cell = $(\'#menu_cell\');\r<br>            var lib_obj_array = new Array();\r<br>            for(var i = 0; i < lib_obj.length; i++){\r<br>                lib_obj_array[i] = $(lib_obj[i]);\r<br>            }           \r<br>            var lib_obj_origin_array = new Array();\r<br>             for(var i = 0; i < lib_obj.length; i++){\r<br>                lib_obj_array[i] = $(lib_obj[i]);                \r<br>                var temp = new Array();\r<br>                temp[\'id\'] = lib_obj_array[i].attr(\'id\');\r<br>                temp[\'left\'] = lib_obj_array[i].css(\'left\');\r<br>                temp[\'top\'] = lib_obj_array[i].css(\'top\');\r<br>                temp[\'width\'] = lib_obj_array[i].css(\'width\');\r<br>                temp[\'height\'] = lib_obj_array[i].css(\'height\');\r<br>                lib_obj_origin_array.push(temp);\r<br>            }            \r<br>            var zoom_max_level = "in";            \r<br>            var origin_left = 0;\r<br>            var origin_top = 0;                        \r<br>            \r<br>            //fix for IE and chrome, initiate position\r<br>            map.css({\r<br>                \'left\' : 0,\r<br>                \'top\'  : 0\r<br>            });\r<br>            var menu_width = $(\'#menu\').width(); //width of left hand side menu\r<br>                    \r<br>            //tooltip\r<br>            lib_obj.tooltip();\r<br>            \r<br>                        \r<br>            \r<br>            \r<br>            //place div click action\r<br>                            $(\'#place_1\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/1";\r<br>                });                \r<br>                            $(\'#place_2\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/2";\r<br>                });                \r<br>                            $(\'#place_3\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/3";\r<br>                });                \r<br>                            $(\'#place_5\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/5";\r<br>                });                \r<br>                            $(\'#place_6\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/6";\r<br>                });                \r<br>                            $(\'#place_7\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/7";\r<br>                });                \r<br>                            $(\'#place_8\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/8";\r<br>                });                \r<br>                            $(\'#place_9\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/9";\r<br>                });                \r<br>                            $(\'#place_10\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/10";\r<br>                });                \r<br>                            $(\'#place_11\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/11";\r<br>                });                \r<br>                            $(\'#place_12\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/12";\r<br>                });                \r<br>                            $(\'#place_13\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/13";\r<br>                });                \r<br>                            $(\'#place_14\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/14";\r<br>                });                \r<br>                            $(\'#place_16\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/16";\r<br>                });                \r<br>                            $(\'#place_17\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/17";\r<br>                });                \r<br>                            $(\'#place_18\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/18";\r<br>                });                \r<br>                            $(\'#place_19\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/19";\r<br>                });                \r<br>                            $(\'#place_20\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/20";\r<br>                });                \r<br>                            $(\'#place_21\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/21";\r<br>                });                \r<br>                            $(\'#place_22\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/22";\r<br>                });                \r<br>                            $(\'#place_23\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/23";\r<br>                });                \r<br>                            $(\'#place_24\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/24";\r<br>                });                \r<br>                            $(\'#place_25\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/25";\r<br>                });                \r<br>                            $(\'#place_26\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/26";\r<br>                });                \r<br>                            $(\'#place_27\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/27";\r<br>                });                \r<br>                            $(\'#place_28\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/28";\r<br>                });                \r<br>                            $(\'#place_55\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/55";\r<br>                });                \r<br>                            $(\'#place_108\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/108";\r<br>                });                \r<br>                            $(\'#place_181\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/181";\r<br>                });                \r<br>                            $(\'#place_182\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/182";\r<br>                });                \r<br>                            $(\'#place_183\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/183";\r<br>                });                \r<br>                            $(\'#place_186\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/186";\r<br>                });                \r<br>                            $(\'#place_188\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/188";\r<br>                });                \r<br>                            $(\'#place_190\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/190";\r<br>                });                \r<br>                            $(\'#place_191\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/191";\r<br>                });                \r<br>                            $(\'#place_196\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/196";\r<br>                });                \r<br>                            $(\'#place_202\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/202";\r<br>                });                \r<br>                            $(\'#place_203\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/203";\r<br>                });                \r<br>                            $(\'#place_205\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/205";\r<br>                });                \r<br>                            $(\'#place_210\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/210";\r<br>                });                \r<br>                            $(\'#place_211\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/211";\r<br>                });                \r<br>                            $(\'#place_216\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/216";\r<br>                });                \r<br>                            $(\'#place_218\').click(function(){                   \r<br>                   window.location.href = "/floorplans/place/detail/218";\r<br>                });                \r<br>                        \r<br>            //draggable div (the response area that float on top of map)          \r<br>            $( "#draggable_div" ).draggable({                \r<br>                scroll: false,\r<br>                cursor: "move",\r<br>                handle: ".lib_obj, .item_locator",\r<br>                start: function(){\r<br>                    draggable_active  = 1;\r<br>                    $(\'#circle\').hide();\r<br>                    $(\'.lib_obj\').hide();               \r<br>                    $(\'.tooltip\').hide();\r<br>                                                                  \r<br>                    origin_left = parseFloat(document.getElementById(\'draggable_div\').style.left);\r<br>                    origin_top = parseFloat(document.getElementById(\'draggable_div\').style.top);                    \r<br>                    if(isNaN(origin_left)){\r<br>                        origin_left = 0;                        \r<br>                    }\r<br>                    if(isNaN(origin_top)){\r<br>                        origin_top = 0;\r<br>                    }\r<br>                },\r<br>                stop: function(){\r<br>                    //calculate the displacement of draggable div                                      \r<br>                    var moved_left = parseFloat(document.getElementById(\'draggable_div\').style.left)- origin_left;\r<br>                    var moved_top = parseFloat(document.getElementById(\'draggable_div\').style.top) - origin_top;\r<br>                    \r<br>                    //restore draggable div position                                        \r<br>                    $(\'#draggable_div\').css({\r<br>                        \'left\'  :   origin_left,\r<br>                        \'top\'   :   origin_top\r<br>                    });\r<br>                    //move map and all its related element\r<br>                    moveMap(moved_left, moved_top);                    \r<br>                    \r<br>                    $(\'.lib_obj\').show();\r<br>                    $(\'#\'+place_focus.val()).tooltip(\'show\');\r<br>                                        draggable_active = 0;\r<br>                }\r<br>            });\r<br>            \r<br>             //draggable map (the floor flan picture)        \r<br>            $( "#map" ).draggable({                \r<br>                scroll: false,\r<br>                cursor: "move",                \r<br>                start: function(){                    \r<br>                    draggable_active  = 1;\r<br>                    $(\'.lib_obj\').hide();\r<br>                    $(\'.tooltip\').hide();\r<br>                    $(\'#circle\').hide();                    \r<br>                                        origin_left = parseFloat($("#map").css(\'left\'));            \r<br>                    origin_top = parseFloat($("#map").css(\'top\'));                    \r<br>                },\r<br>                stop: function(){\r<br>                    //calculate the displacement of map\r<br>                    var moved_left = parseFloat($("#map").css(\'left\')) - origin_left;\r<br>                    var moved_top = parseFloat($("#map").css(\'top\')) - origin_top;\r<br>                                        \r<br>                    $(\'.lib_obj\').each(function(index){\r<br>                        //get element position\r<br>                        var element_left = parseFloat($(this).css(\'left\'));\r<br>                        var element_top = parseFloat($(this).css(\'top\'));\r<br>                        \r<br>                        //calculate new position of element\r<br>                        var final_left = element_left+moved_left;\r<br>                        var final_top = element_top+moved_top;\r<br>                        \r<br>                        //move the element                                              \r<br>                        $(this).css({\r<br>                            \'left\'  :   final_left,\r<br>                            \'top\'   :   final_top\r<br>                        });\r<br>                    });\r<br>                    \r<br>                    //move circle if there is place focus\r<br>                    if(place_focus.val() !== ""){\r<br>                        var circle = $(\'#circle\');\r<br>                        var circle_left = parseFloat(circle.css(\'left\'));\r<br>                        var circle_top = parseFloat(circle.css(\'top\'));                \r<br>                        var circle_final_left = circle_left + moved_left;\r<br>                        var circle_final_top = circle_top + moved_top;\r<br>                        circle.css({\r<br>                           \'left\'       :   circle_final_left,\r<br>                           \'top\'        :   circle_final_top\r<br>                        });\r<br>                        if(place_focus.val() != "item_locator"){\r<br>                            circle.show();\r<br>                        }\r<br>                    }\r<br>                    \r<br>                                        \r<br>                    $(\'.lib_obj\').show();\r<br>                    //show the tooltip of place focus\r<br>                    $(\'#\'+place_focus.val()).tooltip(\'show\');\r<br>                                        draggable_active = 0;\r<br>                }\r<br>            });            \r<br>            //firefox and old safari call pageshow event \r<br>            if($.browser.mozilla || $.browser.safari){\r<br>                window.addEventListener(\'pageshow\', function() {\r<br>                    $(\'#mouse_moved\').val("false");\r<br>                    $(\'.tooltip\').hide();\r<br>                    //focus on initial \r<br>                    //if item is set, focus item\r<br>                                            //if place_id is set, focus that place         \r<br>                                                    centerMap(800, 425); //mid pixel of map\r<br>                                                        \r<br>                            zoomOutMax();\r<br>                                                                                            \r<br>                    //show desktop menu or mobile menu\r<br>                    var window_width = parseInt($(window).width());                    \r<br>                    if(window_width >= 937){                    \r<br>                        $(\'.desktop_menu\').show();\r<br>                        $(\'.desktop_menu_2\').hide();\r<br>                        $(\'.mobile_menu\').hide();\r<br>                        $(\'#zoom_in_btn\').css(\'top\', 45);\r<br>                        $(\'#zoom_out_btn\').css(\'top\', 45);\r<br>                        $(\'#max_size_btn\').css(\'top\', 45);\r<br>                        $(\'#min_size_btn\').css(\'top\', 45);\r<br>                        $(\'#space_before_container\').css(\'height\', 45);\r<br>                        $(\'#floor-label-div\').css(\'top\', 45);\r<br>                        $(\'#floor-label-div\').css(\'text-align\', \'center\');\r<br>                        $(\'#floor-label-div\').show();\r<br>                    }else{\r<br>                        if(window_width >= 615){\r<br>                            $(\'.desktop_menu\').hide();\r<br>                            $(\'.desktop_menu_2\').show();\r<br>                            $(\'.mobile_menu\').hide();\r<br>                            $(\'#zoom_in_btn\').css(\'top\', 90);\r<br>                            $(\'#zoom_out_btn\').css(\'top\', 90);\r<br>                            $(\'#max_size_btn\').css(\'top\', 90);\r<br>                            $(\'#min_size_btn\').css(\'top\', 90);\r<br>                            $(\'#space_before_container\').css(\'height\', 90);\r<br>                            $(\'#floor-label-div\').css(\'top\', 90);\r<br>                            $(\'#floor-label-div\').css(\'text-align\', \'center\');\r<br>                            $(\'#floor-label-div\').show();\r<br>                        }else{\r<br>                            $(\'.desktop_menu\').hide();\r<br>                            $(\'.desktop_menu_2\').hide();\r<br>                            $(\'.mobile_menu\').show();\r<br>                            //$(\'#zoom_in_btn\').css(\'top\', 49);\r<br>                            //$(\'#zoom_out_btn\').css(\'top\', 49);\r<br>                            //$(\'#max_size_btn\').css(\'top\', 49);\r<br>                            //$(\'#min_size_btn\').css(\'top\', 49);\r<br>                            //$(\'#space_before_container\').css(\'height\', 49);\r<br>\t\t\t\t\t\t\t$(\'#zoom_in_btn\').css(\'top\', 113);\r<br>                            $(\'#zoom_out_btn\').css(\'top\', 113);\r<br>                            $(\'#max_size_btn\').css(\'top\', 113);\r<br>                            $(\'#min_size_btn\').css(\'top\', 113);\r<br>                            $(\'#space_before_container\').css(\'height\', 113);\r<br>                            $(\'#floor-label-div\').hide();\r<br>                                                    }\r<br>                    }                    \r<br>                    //if place_focus is set, destroy all tooltip and change cursor back to default\r<br>                    if(place_focus.val() != ""){                        \r<br>                        lib_obj.css(\'cursor\',\'default\');\r<br>                        $(\'#\'+place_focus.val()).tooltip(\'show\');                        \r<br>                    }                                \r<br>                }, false);\r<br>            }else{\r<br>                //other browser call window load event\r<br>                $(window).load(function(){                  \r<br>                    //focus on initial \r<br>                    //if item is set, focus item\r<br>                                            //if place_id is set, focus that place         \r<br>                                                    centerMap(800, 425); //mid pixel of map\r<br>                                                            \r<br>                            zoomOutMax();\r<br>                                                                                            \r<br>                    //show desktop menu or mobile menu                                    \r<br>                    var window_width = parseInt($(window).width());                    \r<br>                    if(window_width >= 937){                    \r<br>                        $(\'.desktop_menu\').show();\r<br>                        $(\'.desktop_menu_2\').hide();\r<br>                        $(\'.mobile_menu\').hide();\r<br>                        $(\'#zoom_in_btn\').css(\'top\', 45);\r<br>                        $(\'#zoom_out_btn\').css(\'top\', 45);\r<br>                        $(\'#max_size_btn\').css(\'top\', 45);\r<br>                        $(\'#min_size_btn\').css(\'top\', 45);\r<br>                        $(\'#space_before_container\').css(\'height\', 45);\r<br>                        $(\'#floor-label-div\').css(\'top\', 45);\r<br>                        $(\'#floor-label-div\').css(\'text-align\', \'center\');\r<br>                        $(\'#floor-label-div\').show();\r<br>                    }else{\r<br>                        if(window_width >= 615){\r<br>                            $(\'.desktop_menu\').hide();\r<br>                            $(\'.desktop_menu_2\').show();\r<br>                            $(\'.mobile_menu\').hide();\r<br>                            $(\'#zoom_in_btn\').css(\'top\', 90);\r<br>                            $(\'#zoom_out_btn\').css(\'top\', 90);\r<br>                            $(\'#max_size_btn\').css(\'top\', 90);\r<br>                            $(\'#min_size_btn\').css(\'top\', 90);\r<br>                            $(\'#space_before_container\').css(\'height\', 90);\r<br>                            $(\'#floor-label-div\').css(\'top\', 90);\r<br>                            $(\'#floor-label-div\').css(\'text-align\', \'center\');\r<br>                            $(\'#floor-label-div\').show();\r<br>                        }else{\r<br>                            $(\'.desktop_menu\').hide();\r<br>                            $(\'.desktop_menu_2\').hide();\r<br>                            $(\'.mobile_menu\').show();\r<br>                            //$(\'#zoom_in_btn\').css(\'top\', 49);\r<br>                            //$(\'#zoom_out_btn\').css(\'top\', 49);\r<br>                            //$(\'#max_size_btn\').css(\'top\', 49);\r<br>                            //$(\'#min_size_btn\').css(\'top\', 49);\r<br>                            //$(\'#space_before_container\').css(\'height\', 49);\r<br>\t\t\t\t\t\t\t$(\'#zoom_in_btn\').css(\'top\', 113);\r<br>                            $(\'#zoom_out_btn\').css(\'top\', 113);\r<br>                            $(\'#max_size_btn\').css(\'top\', 113);\r<br>                            $(\'#min_size_btn\').css(\'top\', 113);\r<br>                            $(\'#space_before_container\').css(\'height\', 113);\r<br>                                                        $(\'#floor-label-div\').hide();\r<br>                        }\r<br>                    }\r<br>                    //if place_focus is set, destroy all tooltips and change cursor back to default\r<br>                    if(place_focus.val() != ""){                                               \r<br>                        lib_obj.css(\'cursor\',\'default\');\r<br>                        $(\'#\'+place_focus.val()).tooltip(\'show\');                       \r<br>                    }\r<br>                });\r<br>            }\r<br>            \r<br>            /**\r<br>             * Touch event\r<br>             */\r<br>            if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)){               \r<br>                //doubletap\r<br>                $(\'#map_container\').hammer({\r<br>                    prevent_default:false\r<br>                    }).bind("doubletap", function(ev){                        \r<br>                        switch(zoom_max_level){                            \r<br>                            case \'in\':\r<br>                                zoomOutMax();\r<br>                                zoom_max_level = \'out\';\r<br>                                break;\r<br>                            case \'out\':\r<br>                                zoomInMax();\r<br>                                zoom_max_level = \'in\';\r<br>                                break;                            \r<br>                        }\r<br>                        \r<br>                        \r<br>                });\r<br>            }\r<br>            \r<br>            //window resize event\r<br>            window.onresize = function(event) {\r<br>                //update the map container height\r<br>                var window_height = parseFloat($(window).height()) - 36;\r<br>                var window_width = parseFloat($(window).width());\r<br>                map_container.css(\'height\', window_height);\r<br>                \r<br>                //show desktop menu or mobile menu\r<br>                                    \r<br>                var window_width = parseInt($(window).width());                    \r<br>                if(window_width >= 937){                    \r<br>                    $(\'.desktop_menu\').show();\r<br>                    $(\'.desktop_menu_2\').hide();\r<br>                    $(\'.mobile_menu\').hide();\r<br>                    $(\'#zoom_in_btn\').css(\'top\', 45);\r<br>                    $(\'#zoom_out_btn\').css(\'top\', 45);\r<br>                    $(\'#max_size_btn\').css(\'top\', 45);\r<br>                    $(\'#min_size_btn\').css(\'top\', 45);\r<br>                    $(\'#space_before_container\').css(\'height\', 45);\r<br>                    $(\'#floor-label-div\').css(\'top\', 45);\r<br>                    $(\'#floor-label-div\').css(\'text-align\', \'center\');\r<br>                    $(\'#floor-label-div\').show();\r<br>                }else{                    \r<br>                    if(window_width >= 615){\r<br>                        $(\'.desktop_menu\').hide();\r<br>                        $(\'.desktop_menu_2\').show();\r<br>                        $(\'.mobile_menu\').hide();\r<br>                        $(\'#zoom_in_btn\').css(\'top\', 90);\r<br>                        $(\'#zoom_out_btn\').css(\'top\', 90);\r<br>                        $(\'#max_size_btn\').css(\'top\', 90);\r<br>                        $(\'#min_size_btn\').css(\'top\', 90);\r<br>                        $(\'#space_before_container\').css(\'height\', 90);\r<br>                        $(\'#floor-label-div\').css(\'top\', 90);\r<br>                        $(\'#floor-label-div\').css(\'text-align\', \'center\');\r<br>                        $(\'#floor-label-div\').show();\r<br>                    }else{\r<br>                        $(\'.desktop_menu\').hide();\r<br>                        $(\'.desktop_menu_2\').hide();\r<br>                        $(\'.mobile_menu\').show();\r<br>                        //$(\'#zoom_in_btn\').css(\'top\', 49);\r<br>                        //$(\'#zoom_out_btn\').css(\'top\', 49);\r<br>                        //$(\'#max_size_btn\').css(\'top\', 49);\r<br>                        //$(\'#min_size_btn\').css(\'top\', 49);\r<br>                        //$(\'#space_before_container\').css(\'height\', 49);\r<br>\t\t\t\t\t\t$(\'#zoom_in_btn\').css(\'top\', 113);\r<br>                        $(\'#zoom_out_btn\').css(\'top\', 113);\r<br>                        $(\'#max_size_btn\').css(\'top\', 113);\r<br>                        $(\'#min_size_btn\').css(\'top\', 113);\r<br>                        $(\'#space_before_container\').css(\'height\', 113);\r<br>                                                $(\'#floor-label-div\').hide();\r<br>                    }\r<br>                }\r<br>            }\r<br>            \r<br>            /**\r<br>             * zoom btn\r<br>             */\r<br>            $(\'#zoom_out_btn\').click(function(){\r<br>                var circle = $(\'#circle\');\r<br>                circle.hide();\r<br>                lib_obj.hide();                \r<br>                tooltip.hide();\r<br>                \r<br>                                               \r<br>                var zoom_ratio = 0.6;                \r<br>                \r<br>                 //calculate adjusted_left\r<br>                var container_width = parseFloat(map_container.css(\'width\'));\r<br>                var new_container_width = container_width * zoom_ratio;\r<br>                var adjusted_left = ((new_container_width - container_width) / 2 ) * (-1); \r<br>                \r<br>                //calculate adjusted_top                \r<br>                var container_height = parseFloat(map_container.css(\'height\'));                \r<br>                var new_container_height = container_height * zoom_ratio;\r<br>                var adjusted_top = ((new_container_height - container_height) / 2 ) * (-1);\r<br>\r<br>                //zoom map\r<br>                zoomMap(zoom_ratio);\r<br>                \r<br>                //fix the container height\r<br>                var window_height = parseFloat($(window).height()) - 36;\r<br>                var window_width = parseFloat($(window).width());\r<br>                map_container.css(\'height\', window_height);\r<br>                \r<br>                //adjust position\r<br>                moveMap(adjusted_left, adjusted_top);\r<br>                \r<br>                lib_obj.show();\r<br>                $(\'#\'+place_focus.val()).tooltip(\'show\');\r<br>                                //if there is place_focus, adjust circle\r<br>                if(place_focus.val() !== ""){\r<br>                    var element = $(\'#\'+place_focus.val());\r<br>                    var target_width = parseFloat(element.css(\'width\'));\r<br>                    var target_height = parseFloat(element.css(\'height\'));\r<br>                    var target_left = parseFloat(element.css(\'left\'));\r<br>                    var target_top = parseFloat(element.css(\'top\'));\r<br>                    var width_offset = target_width * circle_width_amplify_ratio;                    \r<br>                    var height_offset = target_height * circle_height_amplify_ratio;\r<br>                    target_width = target_width + width_offset;\r<br>                    target_height = target_height + height_offset;\r<br>                    target_left = target_left - (width_offset / 2 );\r<br>                    target_top = target_top - (height_offset / 2);                           \r<br>                    circle.css({\r<br>                         \'left\'      :   target_left,\r<br>                         \'top\'       :   target_top,\r<br>                         \'min-width\'     :   target_width,\r<br>                         \'min-height\'    :   target_height,\r<br>                         \'max-width\'     :   target_width,\r<br>                         \'max-height\'    :   target_height\r<br>                    });\r<br>                    if(place_focus.val() != "item_locator"){\r<br>                        circle.show();\r<br>                    }                    \r<br>                }\r<br>            });            \r<br>            $(\'#zoom_in_btn\').click(function(){                \r<br>                lib_obj.hide();                              \r<br>                tooltip.hide();\r<br>                var circle = $(\'#circle\');\r<br>                circle.hide();\r<br>                                var zoom_ratio = parseFloat(1 / 0.6);              \r<br>                \r<br>                //calculate adjusted_left\r<br>                var container_width = parseFloat(map_container.css(\'width\'));\r<br>                var new_container_width = container_width * zoom_ratio;\r<br>                var adjusted_left = ((new_container_width - container_width) / 2 ) * (-1); \r<br>                \r<br>                //calculate adjusted_top                \r<br>                var container_height = parseFloat(map_container.css(\'height\'));                \r<br>                var new_container_height = container_height * zoom_ratio;\r<br>                var adjusted_top = ((new_container_height - container_height) / 2 ) * (-1);\r<br>\r<br>                //zoom map\r<br>                zoomMap(zoom_ratio);\r<br>                \r<br>                //fix the container height\r<br>                var window_height = parseFloat($(window).height()) - 36;\r<br>                var window_width = parseFloat($(window).width());\r<br>                map_container.css(\'height\', window_height);\r<br>                \r<br>                //adjust position\r<br>                moveMap(adjusted_left, adjusted_top);\r<br>                \r<br>                lib_obj.show();\r<br>                $(\'#\'+place_focus.val()).tooltip(\'show\');\r<br>                                \r<br>                //if there is place_focus, adjust circle\r<br>                if(place_focus.val() !== ""){\r<br>                    var element = $(\'#\'+place_focus.val());\r<br>                    var target_width = parseFloat(element.css(\'width\'));\r<br>                    var target_height = parseFloat(element.css(\'height\'));\r<br>                    var target_left = parseFloat(element.css(\'left\'));\r<br>                    var target_top = parseFloat(element.css(\'top\'));\r<br>                    var width_offset = target_width * circle_width_amplify_ratio;                    \r<br>                    var height_offset = target_height * circle_height_amplify_ratio;\r<br>                    target_width = target_width + width_offset;\r<br>                    target_height = target_height + height_offset;\r<br>                    target_left = target_left - (width_offset / 2 );\r<br>                    target_top = target_top - (height_offset / 2);                                    \r<br>                    circle.css({\r<br>                         \'left\'      :   target_left,\r<br>                         \'top\'       :   target_top,\r<br>                         \'width\'     :   target_width,\r<br>                         \'height\'    :   target_height,\r<br>                         \'max-width\'     :   target_width,\r<br>                         \'max-height\'    :   target_height\r<br>                    });\r<br>                    if(place_focus.val() != "item_locator"){\r<br>                        circle.show();\r<br>                    }                    \r<br>                }\r<br>            });\r<br>            \r<br>            \r<br>            /**\r<br>             * Zoom in max (restore to default)\r<br>             */\r<br>            $(\'#max_size_btn\').click(function(){                \r<br>                zoomInMax();               \r<br>            });\r<br>            /**\r<br>             * Zoom out max (fit container)\r<br>             */\r<br>            $(\'#min_size_btn\').click(function(){                \r<br>                zoomOutMax();                     \r<br>            });\r<br>            function zoomInMax(){\r<br>                var circle = $(\'#circle\');\r<br>                circle.hide();\r<br>                lib_obj.hide();                                \r<br>                tooltip.hide();\r<br>                                \r<br>                var map_width = parseFloat(map.css(\'width\'));\r<br>                var zoom_ratio = 1600 / map_width;       \r<br>               \r<br>               //calculate adjusted_left\r<br>                var container_width = parseFloat(map_container.css(\'width\'));\r<br>                var new_container_width = container_width * zoom_ratio;\r<br>                var adjusted_left = ((new_container_width - container_width) / 2 ) * (-1); \r<br>                \r<br>                //calculate adjusted_top                \r<br>                var container_height = parseFloat(map_container.css(\'height\'));                \r<br>                var new_container_height = container_height * zoom_ratio;\r<br>                var adjusted_top = ((new_container_height - container_height) / 2 ) * (-1);\r<br>\r<br>                //zoom map\r<br>                zoomMap(zoom_ratio);\r<br>                \r<br>               //zoom map\r<br>               // zoomMap(zoom_ratio);\r<br>                \r<br>                //fix the container height\r<br>                var window_height = parseFloat($(window).height()) - 36;\r<br>                var window_width = parseFloat($(window).width());\r<br>                map_container.css(\'height\', window_height);\r<br>               \r<br>               //adjust position\r<br>                moveMap(adjusted_left, adjusted_top);              \r<br>                \r<br>                lib_obj.show();\r<br>                $(\'#\'+place_focus.val()).tooltip(\'show\');\r<br>                                //if there is place_focus, adjust circle\r<br>                if(place_focus.val() !== ""){\r<br>                    var element = $(\'#\'+place_focus.val());\r<br>                    var target_width = parseFloat(element.css(\'width\'));\r<br>                    var target_height = parseFloat(element.css(\'height\'));\r<br>                    var target_left = parseFloat(element.css(\'left\'));\r<br>                    var target_top = parseFloat(element.css(\'top\'));\r<br>                    var width_offset = target_width * circle_width_amplify_ratio;                    \r<br>                    var height_offset = target_height * circle_height_amplify_ratio;\r<br>                    target_width = target_width + width_offset;\r<br>                    target_height = target_height + height_offset;\r<br>                    target_left = target_left - (width_offset / 2 );\r<br>                    target_top = target_top - (height_offset / 2);\r<br>                    //var circle = $(\'#circle\');                    \r<br>                    circle.css({\r<br>                         \'left\'      :   target_left,\r<br>                         \'top\'       :   target_top,\r<br>                         \'width\'     :   target_width,\r<br>                         \'height\'    :   target_height,\r<br>                         \'max-width\'     :   target_width,\r<br>                         \'max-height\'    :   target_height\r<br>                    });\r<br>                    if(place_focus.val() != "item_locator"){\r<br>                        circle.show();\r<br>                    }                    \r<br>                }\r<br>            }            \r<br>            function zoomOutMax(){\r<br>                var circle = $(\'#circle\');\r<br>                circle.hide();\r<br>                lib_obj.hide();\r<br>                tooltip.hide();            \r<br>                                var container_width = parseFloat(map_container.css(\'width\'));\r<br>                \r<br>                var map_width = parseFloat(map.css(\'width\'));\r<br>                var zoom_ratio = container_width / map_width;\r<br>                \r<br>                //zoom map\r<br>                zoomMap(zoom_ratio);\r<br>                \r<br>                //fix the container height\r<br>                var window_height = parseFloat($(window).height()) - 36;\r<br>                var window_width = parseFloat($(window).width());\r<br>                map_container.css(\'height\', window_height);\r<br>                \r<br>                //move the map fit the container to view better\r<br>                var map_left = parseFloat(map.css(\'left\')) * (-1);\r<br>                var map_top = parseFloat(map.css(\'top\')) * (-1);\r<br>                \r<br>                //if map height < window height, move the map to center of container\r<br>                var map_height = parseFloat(map.css(\'height\'));\r<br>                if(map_height < window_height){\r<br>                    map_top = map_top + parseFloat(window_height/2) - parseFloat(map_height/2);\r<br>                }                \r<br>                \r<br>                //move map and all its related elements\r<br>                moveMap(map_left, map_top);\r<br>                \r<br>                lib_obj.show();\r<br>                $(\'#\'+place_focus.val()).tooltip(\'show\');\r<br>                                //if there is place_focus, adjust circle\r<br>                if(place_focus.val() !== ""){\r<br>                    var element = $(\'#\'+place_focus.val());\r<br>                    var target_width = parseFloat(element.css(\'width\'));\r<br>                    var target_height = parseFloat(element.css(\'height\'));\r<br>                    var target_left = parseFloat(element.css(\'left\'));\r<br>                    var target_top = parseFloat(element.css(\'top\'));\r<br>                    var width_offset = target_width * circle_width_amplify_ratio;                    \r<br>                    var height_offset = target_height * circle_height_amplify_ratio;\r<br>                    target_width = target_width + width_offset;\r<br>                    target_height = target_height + height_offset;\r<br>                    target_left = target_left - (width_offset / 2 );\r<br>                    target_top = target_top - (height_offset / 2);                                      \r<br>                    circle.css({\r<br>                         \'left\'      :   target_left,\r<br>                         \'top\'       :   target_top,\r<br>                         \'width\'     :   target_width,\r<br>                         \'height\'    :   target_height,\r<br>                         \'max-width\'     :   target_width,\r<br>                         \'max-height\'    :   target_height\r<br>                    });\r<br>                    if(place_focus.val() != "item_locator"){                        \r<br>                        circle.show();\r<br>                    }                    \r<br>                }\r<br>            }\r<br>            function zoomMap(zoom_ratio){\r<br>                var width = 0;\r<br>                var height = 0;\r<br>                var top = 0;\r<br>                var left = 0;\r<br>                \r<br>                //resize map\r<br>                width = parseFloat(map.css(\'width\'));\r<br>                height = parseFloat(map.css(\'height\'));\r<br>                top = parseFloat(map.css(\'top\'));\r<br>                left = parseFloat(map.css(\'left\'));\r<br>                width = width * zoom_ratio;\r<br>                height = height * zoom_ratio;\r<br>                top = top * zoom_ratio;\r<br>                left = left * zoom_ratio;\r<br>                \r<br>                map.css({\r<br>                    \'min-width\'  :  width,\r<br>                    \'min-height\' :  height,\r<br>                    \'max-width\'  :  width,\r<br>                    \'max-height\' :  height,\r<br>                    \'top\'        :  top,\r<br>                    \'left\'       :  left\r<br>                });\r<br>                \r<br>                //calculate the relative zoom ratio from origin, to solve the data loss due to consecutive zoom action               \r<br>                relative_zoom_ratio = width / map_origin_width ;\r<br>                \r<br>                //caculate shift of top and left\r<br>                moved_left = parseFloat(left / relative_zoom_ratio);\r<br>                moved_top = parseFloat(top / relative_zoom_ratio);\r<br>               \r<br>                //resize all place div                \r<br>                for(var i = 0; i < lib_obj_array.length; i++){\r<br>                    var temp = lib_obj_array[i];                    \r<br>                    if(isNaN(lib_obj_origin_array[i][\'width\']) !== false){\r<br>                        width = parseFloat(lib_obj_origin_array[i][\'width\']);                       \r<br>                        height = parseFloat(lib_obj_origin_array[i][\'height\']);                        \r<br>                        top = parseFloat(lib_obj_origin_array[i][\'top\']);\r<br>                        left = parseFloat(lib_obj_origin_array[i][\'left\']);\r<br>                        width = width * relative_zoom_ratio;                       \r<br>                        height = height * relative_zoom_ratio;\r<br>                        top = (top + moved_top )* relative_zoom_ratio;                        \r<br>                        left = (left + moved_left) * relative_zoom_ratio;                        \r<br>                        temp.css({\r<br>                            \'width\'  :   width,\r<br>                            \'height\' :   height,\r<br>                            \'top\'    :   top,\r<br>                            \'left\'   :   left\r<br>                        });                        \r<br>                    }\r<br>                }\r<br>                \r<br>                \r<br>                \r<br>                //resize all item locator div \r<br>                            }\r<br>            /**\r<br>            *move map center to center of viewport\r<br>            */\r<br>            function centerMap(element_left, element_top){\r<br>               var center_left = 0;\r<br>               var center_top = 0;         \r<br>              \r<br>               //calculate center point of map in view port\r<br>               var menu_width = menu_cell.width();\r<br>               var banner_height = banner.height();\r<br>               var view_height = map_container.height() + banner_height;\r<br>               var view_width  = map_container.width() + menu_width;\r<br>               if( $(window).width() < view_width){\r<br>                   center_left = ($(window).width() - menu_width) / 2;    \r<br>               }else{\r<br>                   center_left = map_container.width() / 2;\r<br>               }\r<br>               if( $(window).height() < view_height){\r<br>                   center_top = ($(window).height() - banner_height) / 2;    \r<br>               }else{\r<br>                   center_top = map_container.height() / 2;\r<br>               }        \r<br>               \r<br>               //calculate distance between center point and the element       \r<br>               var moved_left = center_left - element_left;\r<br>               var moved_top = center_top - element_top;\r<br>               \r<br>               //move map\r<br>               moveMap(moved_left, moved_top);\r<br>           }\r<br>    \r<br>    \r<br>            /**\r<br>             * Move map \r<br>             */\r<br>            function moveMap(moved_left, moved_top){\r<br>                //move map        \r<br>                var map_final_left = parseFloat(map.css(\'left\')) + moved_left;\r<br>                var map_final_top = parseFloat(map.css(\'top\')) + moved_top;                \r<br>                map.css({\r<br>                   \'left\'   :   map_final_left,\r<br>                   \'top\'    :   map_final_top\r<br>                });\r<br>              \r<br>                //move element              \r<br>                for(var i = 0; i< lib_obj_array.length; i++){\r<br>                    var temp = lib_obj_array[i];\r<br>                    //get element position\r<br>                    var element_left = parseFloat(temp.css(\'left\'));\r<br>                    var element_top = parseFloat(temp.css(\'top\'));\r<br>                    \r<br>                    //calculate new position of element\r<br>                    var final_left = element_left+moved_left;\r<br>                    var final_top = element_top+moved_top;\r<br>                    \r<br>                    //move the element                                            \r<br>                    temp.css({\r<br>                       \'left\'   :   final_left,\r<br>                       \'top\'    :   final_top\r<br>                    });                \r<br>                }\r<br>                \r<br>                //move circle\r<br>                if((place_focus.val() != "item_locator") && (place_focus.val() != "")) {\r<br>                    var circle = $(\'#circle\');\r<br>                    var element = $(\'#\'+place_focus.val());\r<br>                    var target_width = parseFloat(element.css(\'width\'));\r<br>                    var target_height = parseFloat(element.css(\'height\'));\r<br>                    var target_left = parseFloat(element.css(\'left\'));\r<br>                    var target_top = parseFloat(element.css(\'top\'));\r<br>                    var width_offset = target_width * circle_width_amplify_ratio;                    \r<br>                    var height_offset = target_height * circle_height_amplify_ratio;\r<br>                    target_width = target_width + width_offset;\r<br>                    target_height = target_height + height_offset;\r<br>                    target_left = target_left - (width_offset / 2 );\r<br>                    target_top = target_top - (height_offset / 2);                                   \r<br>                    circle.css({\r<br>                         \'left\'      :   target_left,\r<br>                         \'top\'       :   target_top,\r<br>                         \'width\'     :   target_width,\r<br>                         \'height\'    :   target_height,\r<br>                         \'max-width\'     :   target_width,\r<br>                         \'max-height\'    :   target_height\r<br>                    });\r<br>                    circle.show();\r<br>                }\r<br>                \r<br>                //move item\r<br>                            }\r<br>            \r<br>            /**\r<br>            * Center the element and show tooltip\r<br>            */\r<br>            function focusPlace(id){\r<br>                var center_left = 0;\r<br>                var center_top = 0;         \r<br>               //calculate center point of map in view port\r<br>               var menu_width = menu_cell.width();\r<br>               var banner_height = banner.height();\r<br>               var view_height = map_container.height() + banner_height;\r<br>               var view_width  = map_container.width() + menu_width;\r<br>               if( $(window).width() < view_width){\r<br>                   center_left = ($(window).width() - menu_width) / 2;    \r<br>               }else{\r<br>                   center_left = map_container.width() / 2;\r<br>               }\r<br>               if( $(window).height() < view_height){\r<br>                   center_top = ($(window).height() - banner_height) / 2;    \r<br>               }else{\r<br>                   center_top = map_container.height() / 2;\r<br>               }        \r<br>               //calculate distance between center point and the element\r<br>               var element = $(\'#\'+id);\r<br>               var element_width = parseFloat(element.css(\'width\'));               \r<br>               var element_left = parseFloat(element.css(\'left\'));\r<br>               var element_top = parseFloat(element.css(\'top\'));\r<br>               var moved_left = center_left - element_left - (element_width / 2);\r<br>               var moved_top = center_top - element_top;\r<br>               //move map\r<br>               moveMap(moved_left, moved_top);\r<br>               \r<br>                                                                          \r<br>               var element_left = parseFloat(element.css(\'left\'));\r<br>               var element_top = parseFloat(element.css(\'top\'));\r<br>               var element_height = parseFloat(element.css(\'height\'));\r<br>               var width_offset = element_width * circle_width_amplify_ratio;\r<br>               //var height_offset = element_height * 0.5;\r<br>               var height_offset = element_height * circle_height_amplify_ratio;\r<br>               element_width = element_width + width_offset;\r<br>               element_height = element_height + height_offset;\r<br>               element_left = element_left - (width_offset / 2 );\r<br>               element_top = element_top - (height_offset / 2);\r<br>               var circle = $(\'#circle\');\r<br>               if(place_focus.val() != \'item_locator\'){\r<br>                    circle.show();\r<br>               }\r<br>               circle.css({\r<br>                    \'left\'      :   element_left,\r<br>                    \'top\'       :   element_top,\r<br>                    \'width\'     :   element_width,\r<br>                    \'height\'    :   element_height,\r<br>                    \'max-width\'     :   element_width,\r<br>                    \'max-height\'    :   element_height\r<br>               });\r<br>                              \r<br>               //mark down the place focus\r<br>               place_focus.val(id);\r<br>               \r<br>               //if no place focus, initiate tooltip for all lib_obj\r<br>                if(place_focus.val() != ""){                      \r<br>                     for(var i = 0; i < lib_obj_array.length; i++){\r<br>                        if(lib_obj_array[i].attr(\'id\') != place_focus.val()){\r<br>                            lib_obj_array[i].tooltip(\'destroy\');\r<br>                        }\r<br>                    }                                        \r<br>                }                \r<br>            }            \r<br>            \r<br>            //mouse move event \r<br>            $(document).mousemove(function(e){                \r<br>                var mouse_x = $(\'#mouse_x\');\r<br>                var mouse_y = $(\'#mouse_y\');\r<br>                var mouse_moved = $(\'#mouse_moved\');\r<br>                if(mouse_moved.val() == "false"){                    \r<br>                    if((mouse_x.val() == 0)&&(mouse_y.val() == 0)){                                           \r<br>                        $(\'#mouse_x\').val(e.pageX);\r<br>                        $(\'#mouse_y\').val(e.pageY);                        \r<br>                    }                    \r<br>                    if((mouse_x.val() != e.pageX)|| (mouse_y.val() != e.pageY)){                        \r<br>                        //mouse move and bring back all tooltip                        \r<br>                        if(place_focus.val() != ""){                            \r<br>                            $(\'#mouse_moved\').val("true");\r<br>                            $(\'.lib_obj\').tooltip();\r<br>                            $(\'.lib_obj\').css(\'cursor\', \'pointer\');\r<br>                        }\r<br>                    }\r<br>                }                          \r<br>            });\r<br>        } //end of document ready\r<br>    );   \r<br></script><br><!-- desktop menu --><br><div class="row-fluid breadcrumb_custom desktop_menu" style="display:none;padding-top:0px;padding-left:0px;"><br><div class="span4" style="text-align: left"><br><img alt="" src="/floorplans/images/banner-logo.png"><span class="banner-text">HKUST Library Floor Plans</span><br></img></div><br><div class="span4" style="text-align:center;"><br><div class="btn-group" style="margin-top: 5px;"><br><button class="btn btn-primary btn-large" onclick="javascript:location.href=\'/floorplans/floor/1\';">1/F</button><br><button class="btn btn-warning btn-large" onclick="javascript:location.href=\'/floorplans/floor/2\';">G/F</button><br><!--<span class="divider_custom"></span>--><br><button class="btn btn-primary btn-large" onclick="javascript:location.href=\'/floorplans/floor/3\';">LG1</button><br><button class="btn btn-primary btn-large" onclick="javascript:location.href=\'/floorplans/floor/4\';">LG3</button><br><button class="btn btn-primary btn-large" onclick="javascript:location.href=\'/floorplans/floor/5\';">LG4</button><br></div><br></div><br><div class="span4" style="text-align: right;margin-top:8px;"><br><div><br><div class="btn-group" style="margin-top: 5px;"><br><button class="btn btn-primary" id="back_btn" onclick="javascript: history.go(-1);">Back</button><br><button class="btn btn-primary" onclick=\'javascript:location.href="/floorplans/home/index";\'>Home</button><br><button class="btn btn-primary" onclick=\'javascript:location.href="/floorplans/place/searchResult";\'>Search</button><br><button class="btn btn-primary" onclick=\'javascript:location.href="/floorplans/floor/place/2";\'>Facilities on G/F</button></div></div></div></div></div></body></html><br><br><br><br><br><!-- desktop menu 2--><br><div class="row-fluid breadcrumb_custom desktop_menu_2" style="display:none;text-align: left;padding-top:0px;padding-left:0px;"><br><div class="span12"><br><span class="header" style="text-align: left;"><br><img alt="" src="/floorplans/images/banner-logo.png"/><span class="banner-text">HKUST Library Floor Plans</span><br></span><br><br/><br><div class="row-fluid"><br><div class="span6"><br><div class="btn-group" style="margin-top:5px;"><br><button class="btn btn-primary btn-large" onclick="javascript:location.href=\'/floorplans/floor/1\';">1/F</button><br><button class="btn btn-warning btn-large" onclick="javascript:location.href=\'/floorplans/floor/2\';">G/F</button><br><!--<span class="divider_custom"></span>--><br><button class="btn btn-primary btn-large" onclick="javascript:location.href=\'/floorplans/floor/3\';">LG1</button><br><button class="btn btn-primary btn-large" onclick="javascript:location.href=\'/floorplans/floor/4\';">LG3</button><br><button class="btn btn-primary btn-large" onclick="javascript:location.href=\'/floorplans/floor/5\';">LG4</button><br></div><br></div><br><div class="span6" style="text-align: right;margin-top:8px;margin-left: 0px;"><br><div class="btn-group" style="margin-top: 5px;"><br><button class="btn btn-primary" onclick="javascript: history.go(-1);">Back</button><br><button class="btn btn-primary" onclick=\'javascript:location.href="/floorplans/home/index";\'>Home</button><br><button class="btn btn-primary" onclick=\'javascript:location.href="/floorplans/place/searchResult";\'>Search</button><br><button class="btn btn-primary" onclick=\'javascript:location.href="/floorplans/floor/place/2";\'>Facilities on G/F</button></div></div></div></div></div><br><br><br><br><br><br><!-- mobile menu --><br><div class="row-fluid breadcrumb_custom mobile_menu" style="display:none;text-align: left;min-width:330px;padding-top:0px;padding-left:0px;"><br><div class="span12"><br><span class="header" style="text-align: left;"><br><img alt="" src="/floorplans/images/banner-logo.png"/><span class="banner-text">HKUST Library Floor Plans</span><br></span><br><br/><br><div style="text-align: right;"><br><div class="btn-group"><br><button class="btn btn-primary btn-large" onclick="javascript:location.href=\'/floorplans/floor/1\';">1/F</button><br><button class="btn btn-warning btn-large" onclick="javascript:location.href=\'/floorplans/floor/2\';">G/F</button><br><!--<span class="divider_custom"></span>--><br><button class="btn btn-primary btn-large" onclick="javascript:location.href=\'/floorplans/floor/3\';">LG1</button><br><button class="btn btn-primary btn-large" onclick="javascript:location.href=\'/floorplans/floor/4\';">LG3</button><br><button class="btn btn-primary btn-large" onclick="javascript:location.href=\'/floorplans/floor/5\';">LG4</button><br></div><br></div><br><div class="btn-group" style="text-align: right;"><br><button class="btn btn-primary" onclick="javascript: history.go(-1);">Back</button><br><button class="btn btn-primary" onclick=\'javascript:location.href="/floorplans/home/index";\'>Home</button><br><button class="btn btn-primary" onclick=\'javascript:location.href="/floorplans/place/searchResult";\'>Search</button><br><button class="btn btn-primary" onclick=\'javascript:location.href="/floorplans/floor/place/2";\'>Facilities</button></div></div></div><br><br><br><br><!-- floor label --><br><div id="floor-label-div"><br><button class="btn btn-large btn-warning">Library Ground Floor</button><br></div><br><div id="space_before_container" style="height:38px"></div><br><!-- map on right --><br><div id="map_container" style="border: 0px;"><br><div id="draggable_div"><br><img id="map" src="/floorplans/images/gf.png?dummy=53173" style="position: relative;"/><br><!-- tooltips lib_obj --><br><div class="lib_obj" id="place_1" title="Circulation Office"></div><br><div class="lib_obj" id="place_2" title="Circulation Counter"></div><br><div class="lib_obj" id="place_3" title="Collection Development"></div><br><div class="lib_obj" id="place_5" title="Document Supply Service Office (room G-341)"></div><br><div class="lib_obj" id="place_6" title="Entrance"></div><br><div class="lib_obj" id="place_7" title="Campus Phone (G/F)"></div><br><div class="lib_obj" id="place_8" title="IC Printer D"></div><br><div class="lib_obj" id="place_9" title="Hot and Cold Drinking Fountain (G/F)"></div><br><div class="lib_obj" id="place_10" title="Restrooms (G/F)"></div><br><div class="lib_obj" id="place_11" title="Information Commons"></div><br><div class="lib_obj" id="place_12" title="Information Commons Help Desk"></div><br><div class="lib_obj" id="place_13" title="Information Commons Learning Space (room G-335)"></div><br><div class="lib_obj" id="place_14" title="Information Desk"></div><br><div class="lib_obj" id="place_16" title="Library Digital Signage System"></div><br><div class="lib_obj" id="place_17" title="IC Printer A"></div><br><div class="lib_obj" id="place_18" title="Library Gallery"></div><br><div class="lib_obj" id="place_19" title="Library Garden"></div><br><div class="lib_obj" id="place_20" title="Lift A (G/F)"></div><br><div class="lib_obj" id="place_21" title="Lift B (G/F)"></div><br><div class="lib_obj" id="place_22" title="Lift C (G/F)"></div><br><div class="lib_obj" id="place_23" title="New Arrivals"></div><br><div class="lib_obj" id="place_24" title="On Call Collection"></div><br><div class="lib_obj" id="place_25" title="Reference Collection (G/F)"></div><br><div class="lib_obj" id="place_26" title="Information Instruction Office (room G-342)"></div><br><div class="lib_obj" id="place_27" title="Reserve Collection"></div><br><div class="lib_obj" id="place_28" title="Popular Books (G/F)"></div><br><div class="lib_obj" id="place_55" title="Current Periodicals"></div><br><div class="lib_obj" id="place_108" title="Current Newspapers"></div><br><div class="lib_obj" id="place_181" title="IC Printer B"></div><br><div class="lib_obj" id="place_182" title="IC Printer C"></div><br><div class="lib_obj" id="place_183" title="iMac"></div><br><div class="lib_obj" id="place_186" title="Group Screens"></div><br><div class="lib_obj" id="place_188" title="Scanner"></div><br><div class="lib_obj" id="place_190" title="DSS Counter"></div><br><div class="lib_obj" id="place_191" title="Media Reserve"></div><br><div class="lib_obj" id="place_196" title="Campus Model"></div><br><div class="lib_obj" id="place_202" title="Collection Highlights"></div><br><div class="lib_obj" id="place_203" title="Newspaper Backfiles"></div><br><div class="lib_obj" id="place_205" title="Modeling Space"></div><br><div class="lib_obj" id="place_210" title="Reference Standalone"></div><br><div class="lib_obj" id="place_211" title="Bloomberg"></div><br><div class="lib_obj" id="place_216" title="Book Display / Media Display"></div><br><div class="lib_obj" id="place_218" title="Adobe Creative Cloud Workstations"></div><br><!-- tooltips of itemlocator --><br></div><br><!-- red circle--><br><img id="circle" src="/floorplans/images/circle.png" style="position: absolute;display:none;z-index:888;"/><br></div><br><button class="btn btn-large btn-inverse" id="zoom_in_btn" title="zoom in" type="button"><i class="icon-plus icon-white"></i></button><br><button class="btn btn-large btn-inverse" id="zoom_out_btn" title="zoom out" type="button"><i class="icon-minus icon-white"></i></button><br><button class="btn btn-large btn-inverse" id="max_size_btn" title="restore the map to 100%" type="button"><span style="font-size:12px">100%</span></button><br><button class="btn btn-large btn-inverse" id="min_size_btn" title="fit screen" type="button"><i class="icon-fullscreen icon-white"></i></button><br><!-- store the focus point of place --><br><input id="place_focus" type="hidden" value=""/><br><!-- initial position of mouse cursor --><br><input id="mouse_x" type="hidden" value="0"/><br><input id="mouse_y" type="hidden" value="0"/><br><input id="mouse_moved" type="hidden" value="false"/><br><div class="clear"></div><br><!-- footer --><br><hr/><br><footer style="text-align: center"><br><p><br><small>HKUST Library Floor Plans, <a href="http://library.ust.hk" target="_blank">HKUST Library</a>,\r<br>\t\t\t<a href="http://www.ust.hk" target="_blank">The Hong Kong University of Science and Technology</a><br></small><br></p><br></footer><br><br><script type="text/javascript"><br>/*<![CDATA[*/<br>jQuery(function($) {<br>jQuery(\'a[rel="tooltip"]\').tooltip();<br>jQuery(\'a[rel="popover"]\').popover();<br>});<br>/*]]>*/<br></script><br><br><br>'